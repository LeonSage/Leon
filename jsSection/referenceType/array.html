<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
	<meta http-equiv="Content-Type" content="text/html" charset="utf-8" />
	<title>Array类型 </title>
	<meta name="author" content="Leon" />
	<meta name="description" content="The page describes the usage of the reference of Array in js operation." />
	<link rel="stylesheet" type="text/css" href="../../js/bootstrap/css/bootstrap.min.css">
	<style type="text/css">
		body,xmp{padding: 0px;margin: 0px;}
		.panel-body{font-size: 15px;}
		.panel-body dt{width: 200px;text-align: right;margin-right: 20px;}
		pre{overflow-x:hidden; }
		.alert{line-height: 20px;font-size: 15px;padding: 5px;}
	</style>
</head>
<body>
	<ol class="breadcrumb">
		<li><a href="#">JS</a></li>
		<li><a href="#">引用类型</a></li>
		<li class="active">Array类型</li>
	</ol>
	<h1><strong>Array</strong></h1>
	<div class="panel panel-info">
		<div class="panel-heading">说明:</div>
		<div class="panel-body">
			<p>Array类型是除了Object类型之外ECMAScript中最常用的类型了.而且,ECMAScript中的数组与其他多数语言中的数组有着相当大的区别.虽然ECMAScript数组与其他任何语言中的数组都是数据的有序列表,但与其他语言不同的是,ECMAScript数组的每一项可以保存任何类型的数据.也就是说,可以用数组的第一个位置来保存字符串,用第二外置来保存数值,打三个位置来保存对象.而且,ECMAScript数组的大小是可以动态调整的,即可以随着数据的添加来自动增长以容纳新增数据.</p>
			<p>创建数组的基本方式有两种.第一种是使用Array构造函数:</p>
			<pre>var colors=new Array();</pre>
			<p>如果预先知道数组要保存的项目数量,也可以给构造函数传递该数量,而该数量会自动变成length属性的值.</p>
			<pre>
//创建length为20的数组
var colors=new Array(20);</pre>
			<p>也可以向Array构造函数传递数组中应该包含的项.</p>
			<pre>var colors=new Array("red","blue","green");</pre>
			<p>另外,在使用Array的构造函数创建数组时也可以省略new操作符.</p>
			<pre>var colors=Array(3);</pre>
			<p>创建数组的第二种基本方式是使用数组字面量表示法.数组字面量由一对包含数组项的方括号表示,多个数组项之间以逗号隔开.</p>
			<pre>
var colors=["red","blue","green"];        //创建一个包含3个字符串的数组
var names=[];        //创建一个空数组
var values=[1,2,];        //不要这样!会创建一个包含2项或者3项的数组
var options=[,,,,,];        //不要这样!会创建一个包含5或6项的数组
			</pre>
			<p class="alert alert-info">在数组字面量的最后一项添加逗号的结果:在IE8及之前版本中的ECMAScript实现在数组字面量方面存在bug.由于这个bug,在IE8-中会创建包含6项的数组,而其他浏览器会创建5项的数组(其中每一项都是undefined).由于兼容性,建议读者不要使用这种语法.与对象一样,在使用数组字面量表示法时,也不会调用Array构造函数.</p>
			<p>在访问和设置值时,使用方括号并提供索引即可.如果设置某个值的索引超过了数组的现有项数,数组就会自动增加项并重新计算长度.数组的length属性很有特点:他不是只读的.因此可以设置长度来向数组末尾移除项或添加项.</p>
			<pre>
var colors=["red","blue","green"];
console.log(colors.length);		//3
colors.length=2;
console.log(colors[2]);		//undefined
colors[5]="black";
console.log(colors.length);		//6
console.log(colors[4]);		//undefined
//利用length属性可以方便的在数组末尾添加新项
colors[colors.length]="black";
colors[colors.length]="brown";
console.log(colors.length);		//8</pre>
			<p class="alert alert-info">数组最多可以包含4,294,967,295个项,这几乎已经可以满足任何编程要求了.如果想添加的项数超过这个上限值,就会发生异常.而创建一个初始大小与这个上限值接近的数组,则可能会导致运行时间超长的脚本错误.</p>
		</div>
		<div class="panel-footer">
			关于本章节Array类型的内容,主要参考于书籍<strong>&lt;&lt;算法导论(原书第3版)&gt;&gt;</strong>.
		</div>
	</div>
	<div class="panel panel-info">
		<div class="panel-heading">
			检测数组
		</div>
		<div class="panel-body">
			<p>自从ECMAScript3做出规定之后,就出现了确定某个对象是不是数组的经典问题.对于一个网页,或者一个全局作用域而言,使用instanceof操作符就能得到满意的结果:</p>
			<pre>console.log(colors instanceof Array);</pre>
			<p class="alert alert-info">instanceof操作符的问题在于,它假定只有一个全局执行环境.如果网页包含多个框架,那实际上就存在两个以上不同的全局执行环境,从而存在两个以上不同版本的Array构造函数.如果你从一个框架向另一个框架传入一个数组,那么传入的数组与在第二个框架中原生创建的数组分别具有各自不同的构造函数.</p>
			<p>为了解决这个问题,ECMAScript5新增了Array.isArray()方法.这个方法的目的是最终确认某个值到底是不是数组,而不管它是在哪个全局执行环境中创建的.</p>
			<pre>cosole.log(Array.isArray(colors);</pre>
			<p>支持Array.isArray()方法的浏览器有IE 9+,Firefox 4+,Safari 5+,Opera 10.5+和Chrome.</p>
		</div>
	</div>
	<div class="panel panel-info">
		<div class="panel-heading">
			转换方法
		</div>
		<div class="panel-body">
			<p>如前所述,所有对象都具有toLocaleString(),toString()和valueOf()方法.其中,调用数组的toString()方法会返回由数组中每个值的字符串形式拼接而成的一个以逗号分割的字符串.而调用valueOf()返回的还是数组.实际上,为了创建这个字符串会调用数组每一项的toString()方法.toLocaleString()类似,也是调用每一项的toLocaleString()方法.</p>
			<pre>
console.log(colors.valueOf());		//输出["red","blue","green"]
console.log(colors.toString());		//输出red,blue,green</pre>
			<p>使用join()方法,则可以使用不同的分隔符来构建这个字符串.join()方法只接收一个参数,即用作分隔符的字符串,然后返回包含所有数组项的字符串.</p>
			<pre>console.log(colors.join("||"));		//输出red||blue||green||</pre>
			<p>如果不给join()方法传入任何的值,或者传入undefinded,则使用逗号作为分隔符,IE7及更早版本会错误的使用字符串"undefined"作为分隔符.</p>
			<p class="alert alert-info">如果数组中的某一项是null,或者undefined,那么该值在上述方法中返回的结果以空字符串表示.</p>
		</div>
	</div>
	<div class="panel panel-info">
		<div class="panel-heading">
			栈方法
		</div>
		<div class="panel-body">
			<p>ECMAScript数组也提供了一种让数组的行为类似于其他数据结构的方法.具体说来,数组可以表现的就像栈一样,后者是一种可以限制插入和删除项的数据结构.栈是一种LIFO(Last-In-First-Out,后进先出)的数据结构,也就是最新添加的项最早被移除.而栈中项的插入(叫做推入)和移除(叫做弹出),只发送在一个位置--栈的顶部.ECMAScript为数组专门提供了push()和pop()方法,以便实现类似栈的行为.</p>
			<p>push()方法可以接收任意数量的参数,把他们逐个添加到数组末尾,并返回修改后数组的长度.而pop()方法则从数组末尾移除最后一项,减少数组的length值,然后移除返回的项.</p>
			<pre>
console.log(colors.push("balck","pink"));		//输出5
console.log(colors.pop());		//输出pink</pre>
		</div>
	</div>
	<div class="panel panel-info">
		<div class="panel-heading">
			队列方法
		</div>
		<div class="panel-body">
			<p>队列数据结构的访问规则是FIFO(First-In-First-Out,先进先出).队列在列表的末端添加项,从列表的前端移除项.由于push()是向数组末端添加项的方法,因此要模拟队列只需一个从数组前端取得项的方法.实现这一操作的数组方法就是shift(),它能够移除数组中的第一个项并返回该项,同时将数组长度减1.综合使用shift()和push()方法,可以像使用队列一样使用数组.</p>
			<pre>
console.log(colors.push("balck","pink"));		//输出5
console.log(colors.shift());		//输出red</pre>
			<p>ECMAScript还为数组提供了一个unshift()方法.顾名思义,unshift()与shift()的用途相反:他能在数组前端添加任意个项并返回新数组的长度.因此,同时使用unshift()和pop()方法,可以从相反的方向来模拟队列,即在数组的前端添加项,从数组末端移除项.</p>
			<pre>
console.log(colors.unshift("balck","pink"));		//输出5
console.log(colors.unshift("purple"));		//输出6
console.log(colors.toString());		//输出purple,black,pink,red,blue,green
console.log(colors.shift());		//输出purple</pre>
			<p class="alert alert-info">IE7及更早版本对JavaScript的实现中存在一个偏差,其unshift()方法总是返回undefined而不是数组的新长度.IE8在非兼容模式下会返回正确的长度.</p>
		</div>
	</div>
	<div class="panel panel-info">
		<div class="panel-heading">
			重排序方法
		</div>
		<div class="panel-body">
			<p>数组中已经存在两个可以直接用来重排序的方法:reverse()和sort(),他们的返回值是排序后的数组.</p>
			<pre>
//reverse()方法可以反转数组项的顺序
var values=[1,5,7,14,25];
console.log(values.reverse());		//输出25,14,7,5,1
//sort()方法会调用每个数组项的toString()方法,然后比较字符串决定排序,默认升序
console.log(values.sort());		//输出1,14,25,5,7
//sort()方法可以接收一个比较函数作为参数用来指定排序
//比较函数接收两个参数,如果第一个参数应该位于第二个之前则返回一个负数,相等返回1,之后返回一个正数
function compare(value1,value2){
	if(value1&lt;value2){
	    return -1;
	}else if(value1&gt;value2){
	    return 1;
	}else{
	    return 0;
	}
}
console.log(values.sort(compare));		//输出1,5,7,14,25
//如果需要降序输出,则交换return值即可
function compare(value1,value2){
	if(value&lt;value2)	return 1;
	else if(value&gt;value2)	return -1;
	else return 0;
}
console.log(values.sort(compare));		//输出25,14,7,5,1
//如果是数据类型或者其valueOf()方法会返回数值类型的对象类型,可以使用简化的比较函数
function compare(value1,value2){
	return value1-value2;		//升序输出
}
			</pre>
			<p></p>
			<pre>
console.log(colors.push("balck","pink"));		//输出5
console.log(colors.pop());		//输出pink</pre>
		</div>
	</div>
<script src="../../js/jQuery/jquery-1.11.3.min.js"></script>
<script src="../../js/bootstrap/js/bootstrap.min.js"></script>
<script>
	$(function(){
		var values=[1,5,7,14,25];
console.log(values.reverse());		//输出25,14,7,5,1
//sort()方法会调用每个数组项的toString()方法,然后比较字符串决定排序,默认升序
console.log(values.sort());		//输出1,14,25,5,7
//sort()方法可以接收一个比较函数作为参数用来指定排序
//比较函数接收两个参数,如果第一个参数应该位于第二个之前则返回一个负数,相等返回1,之后返回一个正数
function compare(value1,value2){
	if(value1<value2){
	    return -1;
	}else if(value1>value2){
	    return 1;
	}else{
	    return 0;
	}
}
console.log(values.sort(compare));		//输出1,5,7,14,25
//如果需要降序输出,则交换return值即可
function compare2(value1,value2){
	if(value1<value2)	return 1;
	else if(value1>value2)	return -1;
	else return 0;
}
console.log(values.sort(compare2));		//输出25,14,7,5,1
//如果是数据类型或者其valueOf()方法会返回数值类型的对象类型,可以使用简化的比较函数
function compare(value1,value2){
	return value1-value2;		//升序输出
}
	});
</script>
</body>
</html>
