<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
	<meta http-equiv="Content-Type" content="text/html" charset="utf-8" />
	<title>NodeJs-fs</title>
	<meta name="author" content="Leon" />
	<meta name="description" content="The page describes the usage of 'fs' module in NodeJs." />
	<link rel="stylesheet" type="text/css" href="../../js/bootstrap/css/bootstrap.min.css">
	<style type="text/css">
		body,xmp{padding: 0px;margin: 0px;}
		.panel-body{font-size: 15px;}
		.panel-body dt{width: 200px;text-align: right;margin-right: 20px;}
		.title{color: rgba(50,160,180,1);font-size: 16px;}
		span[title]{font-size: 18px;margin-bottom: 5px;display:inline-block;line-height: 20px;}
		pre{overflow-x:hidden;background: black;color:#DB9E77; }
		textarea{width: 80%;min-height: 300px;}
		thead{background: #EEE;}
		a:hover{text-decoration: none;}
	</style>
</head>
<body>
	<ol class="breadcrumb">
		<li><a href="#">NodeJs</a></li>
		<li><a href="#">Express</a></li>
		<li class="active">templateEngine</li>
	</ol>
	<h1><strong>TEMPLATE ENGINE 模板引擎</strong></h1>
	<div class="panel panel-info">
		<div class="panel-heading">在Express中使用模板引擎</div>
		<div class="panel-body">
			<p>需要在应用中进行如下设置才能让 Express 渲染模板文件：</p>
			<ul>
				<li>views, 放模板文件的目录，比如： app.set('views', './views')</li>
				<li>view engine, 模板引擎，比如： app.set('view engine', 'jade')</li>
			</ul>
			<p>然后安装相应的模板引擎 npm 软件包。</p>
			<pre>$ npm install jade --save --registy=https://registry.npm.taobao.org</pre>
			<p class="alert alert-info">和 Express 兼容的模板引擎，比如 Jade，通过 res.render() 调用其导出方法 __express(filePath, options, callback) 渲染模板。有一些模板引擎不遵循这种约定，Consolidate.js 能将 Node 中所有流行的模板引擎映射为这种约定，这样就可以和 Express 无缝衔接。</p>
			<p>一旦 view engine 设置成功，就不需要显式指定引擎，或者在应用中加载模板引擎模块，Express 已经在内部加载，如下所示。</p>	
			<pre>app.set('view engine','jade');</pre>
			<p>在 views 目录下生成名为 index.jade 的 Jade 模板文件，内容如下：</p>	
			<pre>
html
  head
    title!= title
  body
    h1!= message
			</pre>
			<p>然后创建一个路由渲染 index.jade 文件。如果没有设置 view engine，您需要指明视图文件的后缀，否则就会遗漏它。</p>	
			<pre>
app.get('/', function (req, res) {
  res.render('index', { title: 'Hey', message: 'Hello there!'});
});
			</pre>
			<p>此时向主页发送请求，“index.jade” 会被渲染为 HTML。</p>
		</div>
		<div class="panel-footer">
			<p>参考自：<code><cite>http://www.expressjs.com.cn/guide/using-template-engines.html</cite></code></p>
		</div>
	</div>
	<div class="panel panel-info">
		<div class="panel-heading">Jade 标签</div>
		<div class="panel-body">
			<p>Jade 是一个高性能的模板引擎，它深受 Haml 影响，它是用 JavaScript 实现的，并且可以供 Node 使用。</p>
			<p>标签就是一个简单的单词</p>
			<pre>html</pre>
			<p>它会被转换为<code>&lt;html>&lt;/html></code></p>
			<p>标签也可以有id和class：</p>
			<pre>
//添加id
div#container

//添加class
div.user-details

//添加多个class和id
div#foo.bar.baz
//转换为&lt;div id="foo" class="bar baz">&lt;/div>
			</pre>
			<p>不停的写<code>div div div</code>很繁琐，我们可以更为简洁的编写：</p>
			<pre>
#foo
.bar
//转换为：
&lt;div id="foo">&lt;/div>
&lt;div class="bar">&lt;/div>
			</pre>
		</div>
	</div>
	<div class="panel panel-info">
		<div class="panel-heading">标签+文本</div>
		<div class="panel-body">
			<p>我们只需要简单的把内容放在标签之后：</p>
			<pre>
p wahoo!
//transfer to:
&lt;p>wahoo!&lt;/p>
			</pre>
			<p>非常简洁，但是大段的文本怎么办呢：</p>
			<pre>
p
	| foo bar baz
	| rawr rawr
	| super cool
	| go jade go				
			</pre>
			<p>它会被转换为<code>&lt;p>foo bar baz rawr ...&lt;p></code></p>
			<p>我们也可以把文本和传递的数据结合起来，我们在app.js文件里把<code>{name:'tj',email:'tj@vision-media.ca'}</code>传递给render()，然后在模板里写：<pre>#user #{name} & lt; #{email}\&gt;</pre></p>
			<pre>
//添加id
div#container

//添加class
div.user-details

//添加多个class和id
div#foo.bar.baz
//转换为&lt;div id="foo" class="bar baz">&lt;/div>
			</pre>
			<p>不停的写<code>div div div</code>很繁琐，我们可以更为简洁的编写：</p>
			<pre>
#foo
.bar
//转换为：
&lt;div id="foo">&lt;/div>
&lt;div class="bar">&lt;/div>
			</pre>
		</div>
	</div>
<script src="../../js/jQuery/jquery-1.11.3.min.js"></script>
<script src="../../js/bootstrap/js/bootstrap.min.js"></script>
<script>
	$(function(){
		
	});
</script>
</body>
</html>